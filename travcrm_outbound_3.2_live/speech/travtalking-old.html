<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Talking Trav</title>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.95.1/js/materialize.min.js"></script>



<script src="//cdn.tutorialzine.com/misc/enhance/v3.js" async></script>

</head> 

<body>

<div class="app"> 

                <h3>Add New Note</h3>

                <div class="input-single">

                    <textarea id="note-textarea" placeholder="Create a new note by typing or using voice recognition." rows="6"></textarea>

                </div>         

                <button id="start-record-btn" title="Start Recording">Start Recognition</button>

                <button id="pause-record-btn" title="Pause Recording">Pause Recognition</button>

                <button id="save-note-btn" title="Save Note">Save Note</button>   

                <p id="recording-instructions">Press the <strong>Start Recognition</strong> button and allow access.</p>

                

                <h3>My Notes</h3>

                <ul id="notes">

                    <li>

                        <p class="no-notes">You don't have any notes.</p>

                    </li>

                </ul>



            </div>





<form class="col s8 offset-s2">

     

     

    <div class="row">

      <div class="input-field col s12">

        <textarea id="message" class="materialize-textarea"></textarea><input type="range" id="pitch" min="0" max="2" value="1" style="display:none;" /><input type="range" id="rate" min="1" max="100" value="10" style="display:none;" /><select id="voices" style="display:none;"></select>

   

      </div>

    </div>

    <a href="#" id="speak" onclick="speektotalk();"  class="waves-effect waves-light btn">Speak</a>

  </form>



<script>

  

    speechSynthesis.onvoiceschanged = function() {

      var $voicelist = $('#voices');



      if($voicelist.find('option').length == 0) {

        speechSynthesis.getVoices().forEach(function(voice, index) {

          var $option = $('<option>')

          .val(index)

          .html(voice.name + (voice.default ? ' (default)' :''));



          $voicelist.append($option);

        });



        $voicelist.material_select();

      }

    }



    function speektotalk(){

      var text = $('#note-textarea').val();

      var msg = new SpeechSynthesisUtterance();

      var voices = window.speechSynthesis.getVoices();

      msg.voice = voices[$('#voices').val()];

      msg.rate = $('#rate').val() / 10;

      msg.pitch = $('#pitch').val();

      msg.text = text;



      msg.onend = function(e) {

        console.log('Finished in ' + event.elapsedTime + ' seconds.');

      };



      speechSynthesis.speak(msg);

    } 
 


</script>

<script src="speech/script.js"></script> 

<script>
setInterval(function(){ 
var recordingtest = $('#recording-instructions').text(); 
if(recordingtest!=''){ 
$('#recording-instructions').text('Stop');
speektotalk(); 
stopwriting(); 
savevoicetottext();
$('#note-textarea').val(''); 
} 
}, 8000);


</script>

<style>

#carbonads{display:none;}

</style>

</body>

</html>

